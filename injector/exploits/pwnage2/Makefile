CC = gcc
AR = ar
CP = cp
ARMCC = arm-elf-gcc
ARMAS = arm-elf-as
OBJCOPY = arm-elf-objcopy
UNAME := $(shell uname -s)
BIN2C = ../../../tools/bin2c
CFLAGS_OSX = -lusb-1.0 -framework CoreFoundation -framework IOKit
CFLAGS_LNX =  -lusb-1.0
INCLUDE = -I./../..

all:	
	$(ARMAS) -mthumb -o payload.o pwnage2.S
	$(OBJCOPY) -O binary payload.o payload.bin
	$(BIN2C) payload.bin payload.h pwnage2
	$(CC) -o pwnage2.o -c pwnage2.c $(INCLUDE) $(CFLAGS_LNX)
		
clean:
	rm -rf *.o *.bin payload.h
