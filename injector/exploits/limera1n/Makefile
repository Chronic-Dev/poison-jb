CC = gcc
AR = ar
CP = cp
ARMCC = arm-elf-gcc
ARMAS = arm-elf-as
OBJCOPY = arm-elf-objcopy
UNAME := $(shell uname -s)
BIN2C = ../../../tools/bin2c
CFLAGS_OSX = -lusb-1.0 -framework CoreFoundation -framework IOKit
CFLAGS_LNX =  -lusb-1.0
INCLUDE = -I./../..

all:	
	$(ARMAS) -mthumb -o payload.o limera1n.S
	$(OBJCOPY) -O binary payload.o payload.bin
	$(BIN2C) payload.bin payload.h limera1n
	$(CC) -o limera1n.o -c limera1n.c $(INCLUDE) $(CFLAGS_LNX)
		
clean:
	rm -rf *.o *.bin payload.h
