CC = gcc
AR = ar
CP = cp
ARMCC = arm-elf-gcc
ARMAS = arm-elf-as
OBJCOPY = arm-elf-objcopy
BIN2C = ../tools/bin2c
UNAME := $(shell uname -s)
BIN2C = ../../../tools/bin2c
CFLAGS_OSX = -lusb-1.0 -framework CoreFoundation -framework IOKit
CFLAGS_LNX =  -lusb-1.0
INCLUDE = -I./../..

all:	
	$(ARMAS) -mthumb -o payload.o steaks4uce.S
	$(OBJCOPY) -O binary payload.o payload.bin
	$(BIN2C) payload.bin payload.h steaks4uce
	$(CC) -o steaks4uce.o -c steaks4uce.c $(INCLUDE) $(CFLAGS_LNX)
		
clean:
	rm -rf *.o *.bin payload.h
